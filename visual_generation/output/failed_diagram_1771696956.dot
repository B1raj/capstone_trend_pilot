\ndigraph MicroservicesArchitecture {\n    rankdir=LR;\n    \n    subgraph cluster_api {\n        label=\"API Layer\"; style=filled; fillcolor=lightcyan;\n        ApiGateway [label=\"API Gateway\" shape=box style=filled fillcolor=skyblue];\n        AuthService [label=\"Auth Service\" shape=box style=filled fillcolor=lightgreen];\n        RateLimiting [label=\"Rate Limiting\" shape=box style=filled fillcolor=lightyellow];\n    }\n    \n    subgraph cluster_services {\n        label=\"Microservices\"; style=filled; fillcolor=aliceblue;\n        UserService [label=\"User Service\" shape=box style=filled fillcolor=lightgreen];\n        OrderService [label=\"Order Service\" shape=box style=filled fillcolor=lightgreen];\n        PaymentService [label=\"Payment Service\" shape=box style=filled fillcolor=lightgreen];\n        NotificationService [label=\"Notification Service\" shape=box style=filled fillcolor=lightgreen];\n    }\n    \n    subgraph cluster_infra {\n        label=\"Infrastructure\"; style=filled; fillcolor=lightgoldenrodyellow;\n        ServiceMesh [label=\"Service Mesh\\n(Istio/Linkerd)\" shape=box style=filled fillcolor=orange];\n        ConfigStore [label=\"Config Store\\n(Consul/Etcd)\" shape=cylinder];\n        EventBroker [label=\"Event Broker\\n(Kafka/RabbitMQ)\" shape=cylinder];\n        Tracing [label=\"Distributed Tracing\\n(Jaeger/Zipkin)\" shape=box style=filled fillcolor=pink];\n    }\n    \n    subgraph cluster_data {\n        label=\"Data Per Service\"; style=filled; fillcolor=lightcoral;\n        UserDB [label=\"User DB\" shape=cylinder style=filled fillcolor=red];\n        OrderDB [label=\"Order DB\" shape=cylinder style=filled fillcolor=red];\n        PaymentDB [label=\"Payment DB\" shape=cylinder style=filled fillcolor=red];\n    }\n    \n    ApiGateway -> AuthService [label=\"auth check\"];\n    ApiGateway -> RateLimiting [label=\"rate limit\"];\n    ApiGateway -> UserService [label=\"route\"];\n    ApiGateway -> OrderService [label=\"route\"];\n    ApiGateway -> PaymentService [label=\"route\"];\n    ApiGateway -> NotificationService [label=\"route\"];\n    \n    UserService -> UserDB;\n    OrderService -> OrderDB;\n    PaymentService -> PaymentDB;\n    \n    UserService -> EventBroker [label=\"publish event\"];\n    OrderService -> EventBroker [label=\"publish event\"];\n    PaymentService -> EventBroker [label=\"publish event\"];\n    NotificationService -> EventBroker [label=\"subscribe\"];\n    \n    UserService -> ServiceMesh;\n    OrderService -> ServiceMesh;\n    PaymentService -> ServiceMesh;\n    NotificationService -> ServiceMesh;\n    \n    ServiceMesh -> ConfigStore;\n    ServiceMesh -> Tracing;\n}\n